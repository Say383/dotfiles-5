Create Both
Expunge Both
SyncState *

IMAPAccount personal
Host {{ .imap_host }}
User {{ .email }}
# To store the password in an encrypted file use PassCmd instead of Pass
# PassCmd "gpg2 -q --for-your-eyes-only --no-tty -d ~/.mailpass.gpg"
Pass {{ (bitwarden "item" .bitwarden.personal_mail).login.password }}
SSLType IMAPS
AuthMechs PLAIN

IMAPStore personal-remote
Account personal

MaildirStore personal-local
Subfolders Verbatim
# The trailing "/" is important
Path ~/mail/personal/
Inbox ~/mail/personal/inbox

Channel personal-inbox
Far :personal-remote:
Near :personal-local:
Patterns "INBOX"

Channel personal-sent
Far :personal-remote:"[Gmail]/Sent Mail"
Near :personal-local:sent

Channel personal-archives
Far :personal-remote:"[Gmail]/All Mail"
Near :personal-local:archives

Channel personal-trash
Far :personal-remote:"[Gmail]/Bin"
Near :personal-local:trash

Group personal
Channel personal-inbox
Channel personal-sent
Channel personal-trash
Channel personal-archives

IMAPAccount work
Host {{ .work.imap_host }}
User {{ .work.workmail }}
Pass {{ (bitwarden "item" .bitwarden.work_mail).login.password }}
SSLType IMAPS
AuthMechs PLAIN

IMAPStore work-remote
Account work

MaildirStore work-local
Subfolders Verbatim
# The trailing "/" is important
Path ~/mail/personal/
Inbox ~/mail/work/inbox

Channel work-inbox
Far :work-remote:
Near :work-local:
Patterns "INBOX"

Channel work-sent
Far :work-remote:"[Gmail]/Sent Mail"
Near :work-local:sent

Channel work-trash
Far :work-remote:"[Gmail]/Trash"
Near :work-local:trash

Group work
Channel work-inbox
Channel work-sent
Channel work-trash
